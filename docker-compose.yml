# Docker Compose file Reference (https://docs.docker.com/compose/compose-file/)
version: '2'
# Define services
services:
  # Alarms service
  alarmsservice:
    # Configuration for building the docker image for the alarms service
    image: 192.168.160.48:5000/es-project/alarmsservice9:latest
    container_name: esp52_alarmsservice9
    ports: 
      - "52040:52040"
    expose:
      - "52040" 
    #depends_on: 
    #  - esp20_logstash
  # External API service
  externalapi:
    # Configuration for building the docker image for the External API service
    image: 192.168.160.48:5000/es-project/externalapi9:latest
    container_name: esp52_externalapi9
    ports: 
      - "52041:52041"
    expose:
      - "52041" 
    #depends_on: 
    #  - esp20_logstash
  # Management Service
  managementservice:
    # Configuration for building the docker image for the Management service
    image: 192.168.160.48:5000/es-project/managementservice9:latest
    container_name: esp52_managementservice9
    ports: 
      - "52042:52042"
    expose:
      - "52042" 
    #depends_on: 
    #  - esp20_logstash
  # Parking Lots service
  parkinglotservice:
    # Configuration for building the docker image for the Parking Lots service
    image: 192.168.160.48:5000/es-project/parkinglotsservice9:latest
    container_name: esp52_parkinglotsservice9
    ports: 
      - "52043:52043"
    expose:
      - "52043" 
    #depends_on: 
    #  - esp20_logstash
    environment:
      - SPRING_DATASOURCE_URL: jdbc:mysql://192.168.160.18:3306/lametro?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
      - SPRING_DATASOURCE_USERNAME: root
      - SPRING_DATASOURCE_PASSWORD: mysql
  # Static info
  staticinfo:
    # Configuration for building the docker image for the Static info service
    image: 192.168.160.48:5000/es-project/staticinfo9:latest
    container_name: esp52_staticinfo9
    ports: 
      - "52044:52044"
    expose:
      - "52044" 
    #depends_on: 
    #  - esp20_logstash
  # Vehicles Service
  vehicleservice:
    # Configuration for building the docker image for the vehicles service
    image: 192.168.160.48:5000/es-project/vehiclesservice8:latest
    container_name: esp52_vehiclesservice8
    ports: 
      - "52038:52038"
    expose:
      - "52038" 
    #depends_on: 
    #  - esp20_logstash
    environment:
      - SPRING_DATASOURCE_URL: jdbc:mysql://192.168.160.18:3306/lametro?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
      - SPRING_DATASOURCE_USERNAME: root
      - SPRING_DATASOURCE_PASSWORD: mysql
  # Frontend Service
  #client:
   # build:
    #  context: projectfrontend # Use an image built from the specified dockerfile in the `app-client` directory.
     # dockerfile: Dockerfile # Specify the Dockerfile path
    #ports:
     # - "3000:3000" # Map the exposed port 80 on the container to port 80 on the host machine
  
# Define Volumes to be created
volumes:
  db-data:
